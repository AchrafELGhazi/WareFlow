import{u as b,a as f,b as j,j as e,s as w}from"./index-CbFpf7t-.js";import{u as y,a as N,A as v}from"./authApi-1x1ubn0R.js";const k=({onSuccess:n})=>{var i,d,m;const{register:t,handleSubmit:c,formState:{errors:s}}=y(),[u,{isLoading:o,error:r}]=N(),p=b(),x=f(),g=((d=(i=j().state)==null?void 0:i.from)==null?void 0:d.pathname)||"/dashboard",h=async l=>{try{const a=await u({username:l.username,password:l.password}).unwrap();p(w({user:a.user,token:a.token})),n&&n(),x(g,{replace:!0})}catch(a){console.error("Failed to sign in",a)}};return e.jsxs("form",{className:"space-y-6",onSubmit:c(h),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{id:"username",type:"text",autoComplete:"username",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",...t("username",{required:"Username is required"})}),s.username&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.username.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{id:"password",type:"password",autoComplete:"current-password",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",...t("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),s.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.password.message})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",...t("rememberMe")}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]})}),r&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:((m=r==null?void 0:r.data)==null?void 0:m.message)||"Login failed. Please try again."})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:o?"Signing in...":"Sign in"})})]})},P=()=>e.jsx(v,{title:"Sign in to your account",linkText:"sign up for a new account",linkUrl:"/auth/signup",children:e.jsx(k,{})});export{P as default};
