import{u as h,a as f,j as e,s as w}from"./index-CbFpf7t-.js";import{u as b,b as j,A as y}from"./authApi-1x1ubn0R.js";const N=({onSuccess:n})=>{var d;const{register:a,handleSubmit:m,watch:l,formState:{errors:s}}=b(),[c,{isLoading:i,error:o}]=j(),u=h(),p=f(),x=l("password"),g=async r=>{if(r.password===r.confirmPassword)try{const t=await c({username:r.username,email:r.email,password:r.password}).unwrap();u(w({user:t.user,token:t.token})),n&&n(),p("/app/dashboard",{replace:!0})}catch(t){console.error("Failed to sign up",t)}};return e.jsxs("form",{className:"space-y-6",onSubmit:m(g),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{id:"username",type:"text",autoComplete:"username",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",...a("username",{required:"Username is required"})}),s.username&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.username.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",...a("email",{pattern:{value:/\S+@\S+\.\S+/,message:"Invalid email address"}})}),s.email&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.email.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{id:"password",type:"password",autoComplete:"new-password",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",...a("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),s.password&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.password.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("input",{id:"confirmPassword",type:"password",autoComplete:"new-password",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",...a("confirmPassword",{required:"Please confirm your password",validate:r=>r===x||"Passwords do not match"})}),s.confirmPassword&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:s.confirmPassword.message})]})]}),o&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsx("p",{className:"text-sm font-medium text-red-800",children:((d=o==null?void 0:o.data)==null?void 0:d.message)||"Sign up failed. Please try again."})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:i?"Creating account...":"Sign up"})})]})},k=()=>e.jsx(y,{title:"Create a new account",linkText:"Sign in here",linkUrl:"/auth/signin",children:e.jsx(N,{})});export{k as default};
